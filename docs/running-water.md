# Running WATER

As an example for running WATER with http-proxy, we're going to use a [`plain.wasm`](https://github.com/getlantern/wateringhole/raw/refs/heads/feat/adding-plain-protocol-from-water/protocols/plain/v1.0.0/plain.wasm) binary available at wateringhole. This WASM was generated by following the [refraction-networking/watm](https://github.com/refraction-networking/watm/blob/v0.7.0-beta/tinygo/v1/examples/plain/README.md) steps for build the plain example.

We've added an config example at `docs/config_examples/water_config.ini` (lines between 104 and 110) and this is the config that we need to change for running with custom WASM binaries:
```ini
water-addr = localhost:9999
water-wasm-available-at = https://github.com/getlantern/wateringhole/raw/refs/heads/feat/adding-plain-protocol-from-water/protocols/plain/v1.0.0/plain.wasm
water-transport = plain
water-mismatch-protocol = PROTOCOL_UNSPECIFIED
```

> [!WARNING]
> The `cfgsvrauthtoken` must be set before running http-proxy, you can set whatever value you want (line 11 at the providen config example)
> `cfgsvrauthtoken =  # must have a value, if you don't have any in mind, you can use date +%s for generating a timestamp`

1. Build HTTP proxy:
```sh
make build
```
2. Run http-proxy with the given configuration:
```sh
./bin/http-proxy -config $(pwd)/docs/config_examples/water_config.ini
```

And this is enough for running http-proxy with WATER! You can also try to use different protocols and contribute by creating WATER WASM protocols and sending a pull request to [`wateringhole`](https://github.com/getlantern/wateringhole)
